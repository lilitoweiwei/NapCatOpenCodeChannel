# nochan configuration file — copy to config.toml and customize.
# See docs/product-v1.md section 9 for full documentation of each option.

[server]
# Bind address for the WebSocket server.
# "0.0.0.0" listens on all interfaces (IPv4+IPv6); required for SSH tunnels.
host = "0.0.0.0"
# Port that NapCatQQ connects to (must match NapCatQQ's reverse WS config).
port = 8282

[opencode]
# Path or name of the opencode executable.
command = "opencode"
# Working directory for opencode subprocess. Tilde (~) is expanded at runtime.
work_dir = "~/.nochan/workspace"
# Maximum number of concurrent opencode processes.
max_concurrent = 1

[database]
# SQLite database file path. Parent directories are created automatically. (relative to project root)
path = "data/nochan.db"

[prompt]
# Directory for prompt template files, relative to opencode work_dir.
# e.g. with work_dir = "~/.nochan/workspace", dir = "prompts"
#      → actual path is ~/.nochan/workspace/prompts/
dir = "prompts"
# Filename for the session-level system prompt (prepended to first message only).
session_init_file = "session_init.md"
# Filename for the per-message prefix prompt (prepended to every message).
message_prefix_file = "message_prefix.md"

[logging]
# Console output level: DEBUG / INFO / WARNING / ERROR.
# The log file always captures DEBUG regardless of this setting.
level = "INFO"
# Directory for log files (created automatically) (relative to project root).
dir = "data/logs"
# Number of days to keep daily-rotated log files.
keep_days = 30
# Total log size cap in MB. On startup, oldest files are deleted if exceeded.
max_total_mb = 100
